// Import design tokens (Sass @use replaces deprecated @import)
@use '../styles/design-tokens' as *;

// Base styles
html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: var(--text-primary);
  background: var(--bg-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color var(--transition-normal), color var(--transition-normal);
}

// Reset styles
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

// Link styles
a {
  color: inherit;
  text-decoration: none;
}

// Dark mode support
@media (prefers-color-scheme: dark) {
  html {
    color-scheme: dark;
  }
}

// Globe theme variables
[data-theme="light"] {
  --globe-spec: #f3f4f6;     // brighter specular
  --globe-mid: #d1d5db;      // metallic silver mid
  --globe-deep: #9ca3af;     // deeper silver
  --globe-edge: #6b7280;     // edge falloff
  --globe-ring: rgba(16,185,129,0.65);
  --flow-color: rgba(16,185,129,0.9);     // greener flows
  --flow-color-alt: rgba(59,130,246,0.8);
  --node-core: #16a34a;      // stronger green
  --node-glow: rgba(34,197,94,0.5);
}

[data-theme="dark"] {
  --globe-spec: #e0e7ff;     // chrome highlight
  --globe-mid: #93c5fd;      // chrome blue mid
  --globe-deep: #3b82f6;     // deeper chrome
  --globe-edge: #0ea5e9;     // edge blue
  --globe-ring: rgba(96,165,250,0.75);
  --flow-color: rgba(34,197,94,0.95);     // neon green
  --flow-color-alt: rgba(59,130,246,0.9);
  --node-core: #22c55e;
  --node-glow: rgba(34,197,94,0.6);
}

/* Dashboard mock global styles (non-module) */
.dashMock {
  width: 100%;
  height: 100%;
  border-radius: var(--radius-xl);
  background: var(--bg-card);
  border: 1px solid var(--border-primary);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
  padding: var(--space-4);
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 260px;
}

.dashMock__top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: var(--space-3);
  border-bottom: 1px solid var(--border-primary);
  margin-bottom: var(--space-3);
}

.dashMock__logo { width: 72px; height: 18px; border-radius: 6px; background: var(--hover-bg); }
.dashMock__tabs { display: flex; gap: 8px; }
.dashMock__tabs span { display: inline-grid; place-items: center; padding: 6px 12px; height: auto; font-size: 12px; border-radius: 999px; background: var(--hover-bg); opacity: .7; border: 1px solid var(--border-primary); min-width: 84px; }
.dashMock__tabs span.active { opacity: 1; background: linear-gradient(90deg, var(--brand-primary), var(--brand-accent)); color: var(--text-inverse); border-color: transparent; }

.dashMock__grid {
  display: grid;
  grid-template-columns: 1.1fr 1.6fr;
  gap: var(--space-4);
  height: 100%;
}

.dashMock__panel {
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
}

.dashMock__form { display: grid; gap: var(--space-3); align-content: start; }
.dashMock__field { display: grid; gap: 6px; }
.dashMock__label { width: auto; height: auto; background: transparent; border-radius: 0; color: var(--text-secondary); font-size: 12px; margin-bottom: 4px; }
.dashMock__input { width: 100%; height: 32px; background: var(--hover-bg); border-radius: 8px; border: 1px solid var(--border-primary); display: flex; align-items: center; padding: 0 10px; color: var(--text-tertiary); font-size: 12px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.dashMock__btn { width: 120px; height: 34px; border-radius: 10px; background: linear-gradient(135deg, var(--brand-primary), var(--brand-accent)); box-shadow: 0 8px 24px rgba(16,185,129,0.25); color: white; display: grid; place-items: center; font-size: 12px; }
.dashMock__btn.pulse { animation: btnPulse 1.6s ease-in-out infinite; }

.dashMock__charts { display: grid; grid-template-rows: 1fr auto auto; gap: var(--space-3); }
.dashMock__sankey { width: 100%; height: 100%; }
.dashMock__flow { filter: drop-shadow(0 0 12px rgba(16,185,129,0.3)); transition: d 400ms ease; }
.dashMock__chartTitle { font-size: 12px; color: var(--text-tertiary); margin-bottom: 6px; padding-left: 2px; }

.dashMock__bars { display: grid; grid-template-columns: repeat(4, 1fr); align-items: end; gap: 8px; height: 70px; }
.dashMock__bar { position: relative; height: 100%; background: var(--hover-bg); border-radius: 8px; overflow: hidden; border: 1px solid var(--border-primary); }
.dashMock__barFill { width: 100%; background: linear-gradient(180deg, var(--brand-primary), var(--brand-accent)); transition: height 400ms ease; }
.dashMock__barLabel { position: absolute; bottom: 6px; left: 6px; font-size: 10px; color: rgba(255,255,255,0.95); text-shadow: 0 1px 2px rgba(0,0,0,0.35); pointer-events: none; }

.dashMock__export { position: relative; width: 160px; height: 34px; border-radius: 10px; border: 1px dashed var(--border-primary); display: inline-flex; align-items: center; justify-content: center; gap: 8px; color: var(--text-tertiary); font-size: 12px; }
.dashMock__export span { position: absolute; inset: -6px; border: 1px solid var(--brand-primary); border-radius: 12px; opacity: 0; }
.dashMock__export.exporting span:first-child { animation: ring 1.2s ease-out forwards; }
.dashMock__export.exporting span:last-child { animation: ring 1.2s ease-out .15s forwards; }

@keyframes btnPulse { 0%, 100% { transform: translateY(0); filter: brightness(1); } 50% { transform: translateY(-2px); filter: brightness(1.06); } }
@keyframes ring { 0% { opacity: .5; transform: scale(1); } 100% { opacity: 0; transform: scale(1.2); } }

/* Light mode refinements for dashboard mock */
[data-theme="light"] {
  .dashMock {
    background: #ffffff;
    border-color: var(--neutral-200);
    box-shadow: 0 12px 32px rgba(2, 6, 23, 0.08), 0 2px 8px rgba(2, 6, 23, 0.04);
  }

  .dashMock__panel {
    background: linear-gradient(180deg, #ffffff 0%, var(--neutral-50) 100%);
    border-color: var(--neutral-200);
    box-shadow: 0 1px 0 rgba(2,6,23,0.04);
  }

  .dashMock__tabs span { background: var(--neutral-100); border-color: var(--neutral-200); }
  .dashMock__input { background: #ffffff; border-color: var(--neutral-200); }
  .dashMock__bar { background: var(--neutral-100); border-color: var(--neutral-200); }
  .dashMock__flow { filter: drop-shadow(0 0 10px rgba(16,185,129,0.25)); }
  .dashMock__export { border-color: var(--neutral-200); }
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .dashMock { min-height: 240px; }
  .dashMock__grid { grid-template-columns: 1fr; }
  .dashMock__charts { grid-template-rows: auto 1fr auto; }
  .dashMock__sankey { height: 140px; }
  .dashMock__bars { height: 64px; }
  .dashMock__export { margin-top: 6px; }
}

@media (max-width: 640px) {
  .dashMock { padding: var(--space-3); border-radius: var(--radius-lg); }
  .dashMock__top { padding-bottom: var(--space-2); }
  .dashMock__tabs span { min-width: 72px; padding: 6px 10px; font-size: 11px; }
  .dashMock__input { height: 30px; font-size: 11px; }
  .dashMock__btn { width: 110px; height: 32px; font-size: 11px; }
  .dashMock__bars { gap: 6px; }
}

@media (max-width: 480px) {
  .dashMock__grid { gap: var(--space-3); }
  .dashMock__chartTitle { margin-top: var(--space-2); }
  .dashMock__export { width: 100%; }
}